<%= render :partial => 'events/filters' %>
<%#= render :partial => 'events/submenu' %>

<table class="dashboard-table table table-bordered tablesorter">
  <thead>
    <tr>
      <th class="mark">
        <% if current_user.is_main? %>
          <input type="checkbox" id="all" title="Remove all trips" />
        <% end %>
      </th>
      <th width="70">Alert Status</th>
      <th>Date of Trip</th>
      <th>TextBuster Vehicle</th>
      <th>TextBuster Phone</th>
      <th>Trip Time</th>
      <th>Total miles/ Ave.Speed</th>
      <th>Trip Details</th>
    </tr>
  </thead>
  <tbody>
    <%= render :partial => "trip", :collection => @trips %>
  </tbody>
</table>
<div class="dashboard-actions">
  <div class="pull-left">
    <% if current_user.is_main?  %>
      <%= link_to "Remove Trips", trip_path(0), :class => "btn", :id => 'delete_trips', :method => :delete %>
    <% end %>
  </div>
  <div class="pull-right"><%= paginate @trips if @trips %></div>
  <br clear="all" />
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $('.dashboard-table tbody input').each(function(e){
      $(this).attr('title','Check to remove trip then click Remove Trip button at the bottom of the page');
    })
  })
</script>

<% content_for :javascripts do %>
  <script>    
    $("a#delete_trips").click(function() {
      var ids = $.map($("input.all:checked"), function(val) { return val.id; })
      if (ids.length == 0) {
        alert("No Alerts checked");
        return false;
      }
      $(this).attr("href", $(this).attr("href") + "?ids=" + ids);
    });
  </script>
<% end %>

<% content_for :javascripts do %>
    <%= javascript_include_tag "jquery.tablesorter.min" %>
    <script>
      $(document).ready(function() {
        $("table.tablesorter").tablesorter({
          headers: { 
            0:{sorter: false}, 
            4:{sorter: false}, 
            5:{sorter: false}, 
            6:{sorter: false} 
          }
        }); 
      });
    </script>
<% end %>

