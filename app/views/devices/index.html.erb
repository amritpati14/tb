<table class="dashboard-table table table-bordered">
  <thead>
    <tr>
      <th class="mark"><% if can? :destroy, Device %><input type="checkbox" id="all" /><% end %></th>
      <th class="mark2"></th>
      <th>Name</th>
      <th>Phones</th>
      <th>Last log/position</th>
    </tr>
  </thead>
  <tbody><%= render :partial => 'device', :collection => @devices %></tbody>
</table>

<div class="dashboard-actions">
  <% if can? :create, Device %>
    <%= link_to 'Add new Textbuster', new_textbuster_path, :class => 'btn', :remote => true %>
  <% end %>
  <% if can? :destroy, @devices %>
    <%= link_to "Remove Textbuster", delete_textbusters_path, :class => "btn", :id => 'delete_device' %>
  <% end %>
</div>

<% content_for :javascripts do %>
  <script>
    $("a#delete_device").click(function() {
      var ids = $.map($("input.all:checked"), function(val) { return val.id; })
      if (ids.length == 0) {
        alert("No Textbusters checked");
        return false;
      }
      $(this).attr("href", $(this).attr("href") + "?ids=" + ids);
    });
  </script>
<% end %>
