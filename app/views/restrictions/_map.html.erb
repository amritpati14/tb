<% content_for :javascripts do %>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.2&sensor=true"></script>
  <% if (can? :create, Restriction) && action_name != 'show' %>
    <%= javascript_include_tag 'step-map' %>
  <% elsif can? :read, Restriction %>
    <%= javascript_include_tag 'view-map' %>
  <% end %>
<% end %>

<div class="input map-input" id='map-input'>
  <div id="map-canvas" class="google-map"></div>
    <% f.object.restrictions.build %>
    <% f.object.restrictions.each_with_index do |restriction, index| %>
      <%= f.fields_for :restrictions, restriction do |r| %>
        <div id="controls_<%= restriction.new_record? ? '' : index %>" class="data_container">
          <%= hidden_field_tag "sizer_lat", '', :id => "sizerLat_#{index}" %>
          <%= hidden_field_tag "sizer_lng", '', :id => "sizerLng_#{index}" %>
          <%= r.hidden_field :latitude, :id => "placeLat_#{index}" %>
          <%= r.hidden_field :longitude, :id => "placeLng_#{index}" %>
          <%= r.hidden_field :radius, :id => "placeRad_#{index}" %>
          <%= hidden_field_tag "alert[restrictions_attributes][#{index}][_destroy]", '', :id => "destroy_#{index}" %>
        </div>
      <% end %>
    <% end %>
    <br>
    <%= hidden_field_tag "active_widget", '', :id => "active_widget" %>
  </div>
</div>


